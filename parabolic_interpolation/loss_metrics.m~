%% Step 1: Import all data files
fisher_vals = importdata('fisher.txt');
dist_teq1 = importdata('distillation_teq1.txt');
dist_teq4 = importdata('distillation_teq4.txt');
ste_vals = importdata('STE.txt');

X = importdata('X.txt');
Y = importdata('Y.txt');
%TODO: add FP here, add MSQE here, possibly different quantization methods
%as well

labels = ['Fisher', 'Distil T=1', 'Distil T=4', 'STE'];
data = {fisher_vals, dist_teq1, dist_teq4, ste_vals};
hessians = cell{}
%% Step 2: create 
% contourf(X, Y, fisher_vals)
THRESHOLD = 3;
n_runs = size(data);

syms g(a,b)
for ii = 1:n_runs(2)
    Z = data{ii};
    Z = Z(:);
    Z(Z>THRESHOLD )=THRESHOLD;
    f = fit([X(:), Y(:)], Z, 'poly22', 'Exclude', Z>THRESHOLD );
    g(a,b) = f.p00 + f.p10*a+ f.p01*b+f.p20*a^2+f.p11 * a * b + f.p02 * b^2
    plot(f, [X(:), Y(:)],  Z )
    hessians{ii} = vpa(hessian(), ()




%% Step 3: loop through cases and plot